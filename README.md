# Лабораторная работа № 2 по АиСД
Логин, использованный в контесте: nakulbaka@edu.hse.ru
## Задача
  Даны прямоугольники на плоскости с углами в целочисленных координатах ([1..109],[1..109]).
  Требуется как можно быстрее выдавать ответ на вопрос «Скольким прямоугольникам принадлежит точка (x,y)?». Подготовка данных должна занимать мало времени.
UPD: только нижние границы включены => (x1<= x) && (x<x2) && (y1<=y) && (y<y2)

## Цели лабораторной работы
Реализовать три разных решения задачи

Выяснить при каком объеме начальных данных и точек какой алгоритм эффективнее.

### Алгоритм перебора
Без подготовки. При поиске – просто перебор всех прямоугольников

Подготовка O(1), поиск O(N)
### Алгоритм на карте
Сжатие координат и построение карты.

Подготовка O(N^3), поиск O(logN)
### Алгоритм на дереве
Сжатие координат и построение персистентного дерева отрезков 

Подготовка O(NlogN), поиск O(logN)

## Тесты

Для тестового набора прямоугольников, был использован набор вложенных друг в друга прямоугольников с координатами типа {10*i, 10*i, 10*(2N-i), 10*(2N-i)}.

Для тестового набора точек, был использован неслучайный набор точек, распределенных более-менее равномерно по ненулевому пересечению прямоугольников. Была использована хэш функция от i с разным базисом для x и y: (p*i)^31%(20*N), p-большое простое, разное для x и y.

## Графики

![image](https://github.com/Nkulbaka1/AlgLab2/assets/129120650/5256e184-287e-4e88-a62a-22d66bccd622)
![image](https://github.com/Nkulbaka1/AlgLab2/assets/129120650/59ac6579-aedb-436b-8e35-0880ce9b42b5)

Ссылка на гугл-таблицу с сырыми данными: https://docs.google.com/spreadsheets/d/1UhaXpTkDaIvWIWfJMMMg3VxkDdmKvd681kEWKHi7zv8/edit#gid=0
## Выводы
### Предобработка
На графике чётко видно преимущество алгоритма на персистентном дереве отрезков над алгоритмом на карте по скорости(оно и понятно, скорость препроцессинга O(NlogN), против O(N^3), где N - количество прямоугольников). Алгоритма полного перебора на графике нет, так как в нём нет предобработки данных.

### Запросы
Очевидно, что на маленьких данных метод перебора будет самым быстрым, ведь он не обременён бинарным поиском и рекурсивным проходом по дереву, и график это подтверждает. Но после того, как количество прямоугольников и точек достигает 400, алгоритмы на карте и на дереве становятся более эффективными. Оба ранееупомянутых алгоритма тратят примерно одинаковое количество времени на запросы.

Таким образом, на малых размерах данных(до 400 прямоугольников и точек) алгоритм полного перебора будет наиболее эффективным, т.к. не обременён тяжелыми по сложности алгоритмами и не требует предобработки. На средних и больших объёмах данных лучше использовать алгоритм на дереве, ввиду сложности препроцессинга O(NlogN) и сложности поиска O(logN).
